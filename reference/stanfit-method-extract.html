<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Extract samples from a fitted Stan model — extract • rstan</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">

<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">


<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script>
<script src="../pkgdown.js"></script>
  
  
<!-- mathjax -->
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">rstan</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../articles/index.html">Vignettes</a>
</li>
<li>
  <a href="../reference/index.html">Functions</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Other Packages
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="http://mc-stan.org/users/interfaces/rstan.html">rstan</a>
    </li>
    <li>
      <a href="http://mc-stan.org/users/interfaces/rstanarm.html">rstanarm</a>
    </li>
    <li>
      <a href="http://mc-stan.org/users/interfaces/bayesplot.html">bayesplot</a>
    </li>
    <li>
      <a href="http://mc-stan.org/users/interfaces/shinystan.html">shinystan</a>
    </li>
    <li>
      <a href="http://mc-stan.org/users/interfaces/rstantools.html">rstantools</a>
    </li>
  </ul>
</li>
<li>
  <a href="http://mc-stan.org">Stan</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="http://discourse.mc-stan.org/">
    <span class="fa fa-users"></span>
     
  </a>
</li>
<li>
  <a href="https://twitter.com/mcmc_stan">
    <span class="fa fa-twitter"></span>
     
  </a>
</li>
<li>
  <a href="https://github.com/stan-dev/loo">
    <span class="fa fa-github"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

      <div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Extract samples from a fitted Stan model</h1>
    </div>

    
    <p>Extract samples from a fitted model represented by an 
  instance of class <code><a href='stanfit-class.html'>stanfit</a></code>.</p>
    

    <pre class="usage"><span class='co'># S4 method for stanfit</span>
<span class='fu'>extract</span>(<span class='no'>object</span>, <span class='no'>pars</span>, <span class='kw'>permuted</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>inc_warmup</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='kw'>include</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a> Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>object</th>
      <td><p>An object of class <code><a href='stanfit-class.html'>stanfit</a></code>.</p></td>
    </tr>
    <tr>
      <th>pars</th>
      <td><p>An optional character vector providing the parameter
    names (or other quantity names) of interest. If not specified,
    all parameters and other quantities are used. The log-posterior with
    name <code>lp__</code> is also included by default.</p></td>
    </tr>
    <tr>
      <th>permuted</th>
      <td><p>A logical scalar indicating whether the draws
    after the <em>warmup</em> period in each chain should be <em>permuted</em> and 
    <em>merged</em>. If <code>FALSE</code>, the original order is kept. For each 
    <code>stanfit</code> object, the permutation is fixed (i.e., extracting samples 
    a second time will give the same sequence of iterations).</p></td>
    </tr>
    <tr>
      <th>inc_warmup</th>
      <td><p>A logical scalar indicating whether to include
    the warmup draws. This argument is only relevant if <code>permuted</code> is 
    <code>FALSE</code>.</p></td>
    </tr>
    <tr>
      <th>include</th>
      <td><p>A logical scalar indicating whether the parameters
    named in <code>pars</code> should be included (<code>TRUE</code>) or excluded 
    (<code>FALSE</code>).</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="methods"><a class="anchor" href="#methods"></a>Methods</h2>

    <p></p><dl class='dl-horizontal'>
    <dt>extract</dt><dd><p><code>signature(object = "stanfit")</code></p></dd>
    Extract samples from a fitted model represented by an instance of class 
    <code><a href='stanfit-class.html'>stanfit</a></code>.
    </dl>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>When <code>permuted = TRUE</code>, this function returns a named list,  
  every element of which is an array representing samples for a parameter
  with all chains merged together.
  
  When <code>permuted = FALSE</code>, an array is returned; the first
  dimension is for the iterations, the second for the number of chains, the 
  third for the parameters. Vectors and arrays are expanded to one 
  parameter (a scalar) per cell, with names indicating the third dimension.
  See the examples (with comments) below. The <code><a href='monitor.html'>monitor</a></code> function
  can be applied to the returned array to obtain a summary 
  (similar to the <code>print</code> method for <code><a href='stanfit-class.html'>stanfit</a></code> objects).</p>
    
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <p>S4 class <code><a href='stanfit-class.html'>stanfit</a></code>, <code><a href='stanfit2array-method.html'>as.array.stanfit</a></code>, and
  <code><a href='monitor.html'>monitor</a></code></p>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'>

<span class='co'># Create a stanfit object from reading CSV files of samples (saved in rstan</span>
<span class='co'># package) generated by funtion stan for demonstration purpose from model as follows. </span>
<span class='co'># </span>
<span class='no'>excode</span> <span class='kw'>&lt;-</span> <span class='st'>'
  transformed data {
    real y[20];
    y[1] &lt;- 0.5796;  y[2]  &lt;- 0.2276;   y[3] &lt;- -0.2959; 
    y[4] &lt;- -0.3742; y[5]  &lt;- 0.3885;   y[6] &lt;- -2.1585;
    y[7] &lt;- 0.7111;  y[8]  &lt;- 1.4424;   y[9] &lt;- 2.5430; 
    y[10] &lt;- 0.3746; y[11] &lt;- 0.4773;   y[12] &lt;- 0.1803; 
    y[13] &lt;- 0.5215; y[14] &lt;- -1.6044;  y[15] &lt;- -0.6703; 
    y[16] &lt;- 0.9459; y[17] &lt;- -0.382;   y[18] &lt;- 0.7619;
    y[19] &lt;- 0.1006; y[20] &lt;- -1.7461;
  }
  parameters {
    real mu;
    real&lt;lower=0, upper=10&gt; sigma;
    vector[2] z[3];
    real&lt;lower=0&gt; alpha;
  } 
  model {
    y ~ normal(mu, sigma);
    for (i in 1:3) 
      z[i] ~ normal(0, 1);
    alpha ~ exponential(2);
  } 
'</span>
<span class='co'># exfit &lt;- stan(model_code = excode, save_dso = FALSE, iter = 200, </span>
<span class='co'>#               sample_file = "rstan_doc_ex.csv")</span>
<span class='co'># </span>
<span class='no'>exfit</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='stan_csv.html'>read_stan_csv</a></span>(<span class='fu'>dir</span>(<span class='fu'>system.file</span>(<span class='st'>'misc'</span>, <span class='kw'>package</span> <span class='kw'>=</span> <span class='st'>'rstan'</span>),
                       <span class='kw'>pattern</span><span class='kw'>=</span><span class='st'>'rstan_doc_ex_[[:digit:]].csv'</span>,
                       <span class='kw'>full.names</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>))

<span class='no'>ee1</span> <span class='kw'>&lt;-</span> <span class='fu'>extract</span>(<span class='no'>exfit</span>, <span class='kw'>permuted</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)
<span class='fu'>print</span>(<span class='fu'>names</span>(<span class='no'>ee1</span>))</div><div class='output co'>#&gt; [1] "mu"    "sigma" "z"     "alpha" "lp__" </div><div class='input'>
<span class='kw'>for</span> (<span class='no'>name</span> <span class='kw'>in</span> <span class='fu'>names</span>(<span class='no'>ee1</span>)) {
  <span class='fu'>cat</span>(<span class='no'>name</span>, <span class='st'>"\n"</span>)
  <span class='fu'>print</span>(<span class='fu'>dim</span>(<span class='no'>ee1</span><span class='kw'>[[</span><span class='no'>name</span>]]))
}</div><div class='output co'>#&gt; mu 
#&gt; [1] 400
#&gt; sigma 
#&gt; [1] 400
#&gt; z 
#&gt; [1] 400   3   2
#&gt; alpha 
#&gt; [1] 400
#&gt; lp__ 
#&gt; [1] 400</div><div class='input'>
<span class='no'>ee2</span> <span class='kw'>&lt;-</span> <span class='fu'>extract</span>(<span class='no'>exfit</span>, <span class='kw'>permuted</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)
<span class='fu'>print</span>(<span class='fu'>dim</span>(<span class='no'>ee2</span>))</div><div class='output co'>#&gt; [1] 100   4  10</div><div class='input'><span class='fu'>print</span>(<span class='fu'>dimnames</span>(<span class='no'>ee2</span>))</div><div class='output co'>#&gt; $iterations
#&gt; NULL
#&gt; 
#&gt; $chains
#&gt; [1] "chain:1" "chain:2" "chain:3" "chain:4"
#&gt; 
#&gt; $parameters
#&gt;  [1] "mu"     "sigma"  "z[1,1]" "z[2,1]" "z[3,1]" "z[1,2]" "z[2,2]" "z[3,2]"
#&gt;  [9] "alpha"  "lp__"  
#&gt; </div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#methods">Methods</a></li>

      <li><a href="#value">Value</a></li>

      <li><a href="#see-also">See also</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Jiqiang Guo, Jonah Gabry, Ben Goodrich.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  </body>
</html>
