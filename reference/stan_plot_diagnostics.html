<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>RStan Diagnostic plots — Diagnostic plots • rstan</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="RStan Diagnostic plots — Diagnostic plots" />
<meta property="og:description" content="Diagnostic plots for HMC and NUTS using ggplot2." />
<meta name="twitter:card" content="summary" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">rstan</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">2.19.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../articles/index.html">Vignettes</a>
</li>
<li>
  <a href="../reference/index.html">Functions</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Other Packages
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="https://mc-stan.org/rstanarm">rstanarm</a>
    </li>
    <li>
      <a href="https://mc-stan.org/bayesplot">bayesplot</a>
    </li>
    <li>
      <a href="https://mc-stan.org/shinystan">shinystan</a>
    </li>
    <li>
      <a href="https://mc-stan.org/loo">loo</a>
    </li>
    <li>
      <a href="https://mc-stan.org/projpred">projpred</a>
    </li>
    <li>
      <a href="https://mc-stan.org/rstantools">rstantools</a>
    </li>
  </ul>
</li>
<li>
  <a href="https://mc-stan.org">Stan</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://twitter.com/mcmc_stan">
    <span class="fa fa-twitter"></span>
     
  </a>
</li>
<li>
  <a href="https://github.com/stan-dev/rstan">
    <span class="fa fa-github"></span>
     
  </a>
</li>
<li>
  <a href="https://discourse.mc-stan.org/">
    <span class="fa fa-users"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>RStan Diagnostic plots</h1>
    
    <div class="hidden name"><code>stan_plot_diagnostics.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Diagnostic plots for HMC and NUTS using ggplot2.</p>
    </div>

    <pre class="usage"><span class='fu'>stan_diag</span>(<span class='no'>object</span>,
            <span class='kw'>information</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"sample"</span>,<span class='st'>"stepsize"</span>, <span class='st'>"treedepth"</span>,<span class='st'>"divergence"</span>),
            <span class='kw'>chain</span> <span class='kw'>=</span> <span class='fl'>0</span>, <span class='no'>...</span>)
  <span class='fu'>stan_par</span>(<span class='no'>object</span>, <span class='no'>par</span>, <span class='kw'>chain</span> <span class='kw'>=</span> <span class='fl'>0</span>, <span class='no'>...</span>)

  <span class='fu'>stan_rhat</span>(<span class='no'>object</span>, <span class='no'>pars</span>, <span class='no'>...</span>)
  <span class='fu'>stan_ess</span>(<span class='no'>object</span>, <span class='no'>pars</span>, <span class='no'>...</span>)
  <span class='fu'>stan_mcse</span>(<span class='no'>object</span>, <span class='no'>pars</span>, <span class='no'>...</span>)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>object</th>
      <td><p>A stanfit or stanreg object.</p></td>
    </tr>
    <tr>
      <th>information</th>
      <td><p>The information to be contained in the diagnostic plot.</p></td>
    </tr>
    <tr>
      <th>par,pars</th>
      <td><p>The name of a single scalar parameter (<code>par</code>) or 
    one or more parameter names (<code>pars</code>).</p></td>
    </tr>
    <tr>
      <th>chain</th>
      <td><p>If <code>chain=0</code> (the default) all chains are combined.
    Otherwise the plot for <code>chain</code> is overlaid on the plot for all chains
    combined.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>For <code>stan_diag</code> and <code>stan_par</code>, optional arguments to 
    <code><a href='https://rdrr.io/pkg/gridExtra/man/arrangeGrob.html'>arrangeGrob</a></code>. For <code>stan_rhat</code>, <code>stan_ess</code>, 
    and <code>stan_mcse</code>, optional arguments to <code><a href='https://ggplot2.tidyverse.org/reference/geom_histogram.html'>stat_bin</a></code>.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>For <code>stan_diag</code> and <code>stan_par</code>, a list containing the ggplot objects for 
  each of the displayed plots. For <code>stan_rhat</code>, <code>stan_ess</code>, 
  and <code>stan_mcse</code>, a single ggplot object.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p></p><dl class='dl-horizontal'>
  <dt><code>stan_rhat</code>,<code>stan_ess</code>,<code>stan_mcse</code></dt><dd><p>Respectively, 
  these plots show the 
  distribution of the Rhat statistic, the ratio of effective sample size to 
  total sample size, and the ratio of Monte Carlo standard error
  to posterior standard deviation for the estimated parameters. These 
  plots are not intended to identify individual parameters, but rather to allow
  for quickly identifying if the estimated values of these quantities are
  desireable for all parameters.</p></dd>
  <dt><code>stan_par</code></dt><dd><p>Calling <code>stan_par</code> generates three plots: 
  (i) a scatterplot of <code>par</code> vs. the accumulated log-posterior (<code>lp__</code>), 
  (ii) a scatterplot of <code>par</code> vs. the average Metropolis acceptance rate 
  (<code>accept_stat</code>), and 
  (iii) a violin plot showing the distribution of <code>par</code> at each of the 
  sampled step sizes (one per chain).
  For the scatterplots, red points are superimposed to indicate which 
  (if any) iterations encountered a divergent transition. Yellow points indicate 
  a transition that hit the maximum treedepth rather than terminated its 
  evolution normally.</p></dd>
  <dt><code>stan_diag</code></dt><dd><p>The <code>information</code> argument is used to specify which 
  plots <code>stan_diag</code> should generate:  <ul>
<li><p><code>information='sample'</code>Histograms of <code>lp__</code> 
      and <code>accept_stat</code>, as well as a scatterplot showing their 
      joint distribution.</p></li>
<li><p><code>information='stepsize'</code>Violin plots showing the 
      distributions of <code>lp__</code> and <code>accept_stat</code> at each of the sampled
      step sizes (one per chain).</p></li>
<li><p><code>information='treedepth'</code>Histogram of <code>treedepth</code> and 
      violin plots showing the distributions of <code>lp__</code> and 
      <code>accept_stat</code> for each value of <code>treedepth</code>.</p></li>
<li><p><code>information='divergence'</code>Violin plots showing the 
      distributions of <code>lp__</code> and <code>accept_stat</code> for iterations that
      encountered divergent transitions (<code>divergent=1</code>) and those that
      did not (<code>divergent=0</code>).</p></li>
</ul></p></dd>

</dl>

    <h2 class="hasAnchor" id="note"><a class="anchor" href="#note"></a>Note</h2>

    <p>For details about the individual diagnostics and sampler parameters and their
  interpretations see the Stan Modeling Language User's Guide and Reference 
  Manual at <a href='http://mc-stan.org/documentation/'>http://mc-stan.org/documentation/</a>.</p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code><a href='plotting-functions.html'>List of RStan plotting functions</a></code>,
<code><a href='stan_plot_options.html'>Plot options</a></code></p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='kw'>if</span> (<span class='fl'>FALSE</span>) {
<span class='no'>fit</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='stan_demo.html'>stan_demo</a></span>(<span class='st'>"eight_schools"</span>)

<span class='fu'>stan_diag</span>(<span class='no'>fit</span>, <span class='kw'>info</span> <span class='kw'>=</span> <span class='st'>'sample'</span>) <span class='co'># shows three plots together</span>
<span class='no'>samp_info</span> <span class='kw'>&lt;-</span> <span class='fu'>stan_diag</span>(<span class='no'>fit</span>, <span class='kw'>info</span> <span class='kw'>=</span> <span class='st'>'sample'</span>) <span class='co'># saves the three plots in a list</span>
<span class='no'>samp_info</span><span class='kw'>[[</span><span class='fl'>3</span>]] <span class='co'># access just the third plot</span>

<span class='fu'>stan_diag</span>(<span class='no'>fit</span>, <span class='kw'>info</span> <span class='kw'>=</span> <span class='st'>'sample'</span>, <span class='kw'>chain</span> <span class='kw'>=</span> <span class='fl'>1</span>) <span class='co'># overlay chain 1</span>

<span class='fu'>stan_par</span>(<span class='no'>fit</span>, <span class='kw'>par</span> <span class='kw'>=</span> <span class='st'>"mu"</span>)
}</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      <li><a href="#value">Value</a></li>
      <li><a href="#details">Details</a></li>
      <li><a href="#note">Note</a></li>
      <li><a href="#see-also">See also</a></li>
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Jiqiang Guo, Jonah Gabry, Ben Goodrich, Jiqiang Guo.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


